Major oil producers have reached a deal to cut oil production and boost the market, following two days of grueling negotiations and despite opposition from U.S. President Donald Trump.OPEC clinched the deal with allied oil-producing nations including Russia at its headquarters in Vienna, Austria on Friday. The gathering came after deep divisions in the energy alliance were laid bare at a closely-watched meeting on Thursday, with OPEC unable to agree on the terms of crude output cuts.The alliance will take 1.2 million barrels per day off the market for the first six months of 2019. The 15-member OPEC cartel has agreed to reduce its output by 800,000 bpd, while Russia and the allied producers will contribute a 400,000 bpd reduction.The deal is in line with expectations for the allies to throttle back output by 1 million to 1.4 million bpd.Brent crude, the international benchmark for oil prices, was trading at $63 a barrel, up 4.9 percent, at 11:15 a.m. ET (1615 GMT). West Texas Intermediate (WTI) stood at $53.69, around 4.3 percent higher.The meeting between OPEC and non-OPEC members comes at a time when the oil market is near the bottom of its worst price plunge since the 2008 financial crisis. Oil prices have crashed around 30 percent over the last two months, ratcheting up the pressure on budgets in oil-exporting countries.OPEC began capping supply in partnership with Russia and several other nations in January 2017 in order to end a punishing downturn in oil prices. The alliance reversed course and agreed to hike output in June after it removed more barrels from the market than it intended, largely due to the ongoing freefall in Venezuelan output and supply disruptions in Libya.The talks made progress on a critical front on Friday, with Russia agreeing to cut output. The 15-member OPEC group had delayed a decision on how many barrels it would take off the market until Moscow committed to a specific reduction.Russia will reduce production by 2 percent from October's output of 11.4 million bpd, equaling about 228,000-230,000 bpd, Russian Energy Minister Alexander Novak said. However, Novak warned that Russia would reduce supply gradually due to conditions that affect its oil fields during the winter.Discussions hit another impasse earlier on Friday because Saudi Arabia had refused to agree to an exemption for Iran, OPEC sources told Reuters.U.S. sanctions against Iran, OPEC's third-largest producer, have already significantly reduced its exports. Iranian Energy Minister Bijan Zangeneh argued his country should not be forced to cut production in light of the sanctions, which are backed by the Saudis.Ultimately, OPEC agreed to exempt Iran, along with Venezuela and Libya. Nigeria, which was exempt under the previous deal, will participate in this round of cuts.The exemptions mean the remaining members will cut production by about 2.5 percent from October levels, said OPEC president and UAE Oil Minister Suhail Mohamed Al Mazrouei. OPEC rescheduled its mid-year meeting for April so it can review market conditions and adjust its policy if necessary.The alliance did not release specific quotas for individual countries, but top OPEC exporter Saudi Arabia laid out its production path during a press conference.The kingdom's production hit an all-time high at 11.1 million bpd in November, said Saudi Energy Minister Khalid al-Falih. That will likely fall to 10.7 million bpd in December and 10.2 million bpd in January, he said."This is partly driven by our commitment to start on the right foot in 2019 and to demonstrate that delivering on this agreement is not going to take a long, protracted period of gradually winding down," Falih said. "We say what we mean and we deliver on what we say."The disclosure was remarkable because analysts had speculated that Saudi Arabia could seek to mask the size of its production cuts to avoid alienating Trump.The Trump administration lobbied for the mid-year production increase as it prepared to restore sanctions on Iran, a policy that has pushed up oil prices throughout much of 2018. Trump has sought to blame OPEC for rising oil prices, ordering the cartel to take action to cut the cost of crude several times this year.On Wednesday, Trump tweeted that he hoped OPEC would not restrict supply and instead keep oil flowing "as is."— CNBC's Brian Sullivan contributed reporting to this story.